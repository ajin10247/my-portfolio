<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ³¨éŸ³éµç›¤äº’å‹•å°è¦½</title>
    
    <!-- 1. å¼•å…¥ Tailwind CSS (æ¨£å¼åº«) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. å¼•å…¥ React å’Œ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- 3. å¼•å…¥ Babel (è®“ç€è¦½å™¨çœ‹å¾—æ‡‚ JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* è‡ªå®šç¾©å‹•ç•«æ¨£å¼ */
        @keyframes fade-in-down {
            0% { opacity: 0; transform: translateY(-10px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-down {
            animation: fade-in-down 0.3s ease-out;
        }
        body {
            font-family: 'Microsoft JhengHei', 'Noto Sans TC', sans-serif;
        }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // --- ç°¡æ˜“åœ–ç¤ºçµ„ä»¶ (æ›¿ä»£ lucide-reactï¼Œç¢ºä¿å–®ä¸€æª”æ¡ˆå¯åŸ·è¡Œ) ---
        const IconBase = ({ children, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );
        const Hand = (props) => <IconBase {...props}><path d="M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"/><path d="M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2"/><path d="M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8"/><path d="M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"/></IconBase>;
        const KeyboardIcon = (props) => <IconBase {...props}><rect width="20" height="16" x="2" y="4" rx="2" ry="2"/><path d="M6 8h.001"/><path d="M10 8h.001"/><path d="M14 8h.001"/><path d="M18 8h.001"/><path d="M6 12h.001"/><path d="M10 12h.001"/><path d="M14 12h.001"/><path d="M18 12h.001"/><path d="M7 16h10"/></IconBase>;
        const MousePointer2 = (props) => <IconBase {...props}><path d="m12 19 7-7 3 3V2L2 11l8 1z"/></IconBase>;
        const Info = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></IconBase>;
        const Layout = (props) => <IconBase {...props}><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><line x1="3" x2="21" y1="9" y2="9"/><line x1="9" x2="9" y1="9" y2="21"/></IconBase>;
        const Scan = (props) => <IconBase {...props}><path d="M3 7V5a2 2 0 0 1 2-2h2"/><path d="M17 3h2a2 2 0 0 1 2 2v2"/><path d="M21 17v2a2 2 0 0 1-2 2h-2"/><path d="M7 21H5a2 2 0 0 1-2-2v-2"/></IconBase>;
        const Volume2 = (props) => <IconBase {...props}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></IconBase>;
        const Type = (props) => <IconBase {...props}><polyline points="4 7 4 4 20 4 20 7"/><line x1="9" x2="15" y1="20" y2="20"/><line x1="12" x2="12" y1="4" y2="20"/></IconBase>;

        // --- è³‡æ–™çµæ§‹å®šç¾© ---
        const FINGER_ZONES = {
            'pinky-l': { color: 'bg-red-200 border-red-400', label: 'å·¦æ‰‹å°æŒ‡', desc: 'è² è²¬æœ€å¤–å´æŒ‰éµï¼ŒåŠ›é‡è¼ƒå°ï¼Œéœ€å¤šç·´ç¿’ã€‚' },
            'ring-l': { color: 'bg-orange-200 border-orange-400', label: 'å·¦æ‰‹ç„¡åæŒ‡', desc: 'è² è²¬ "2, W, S, X" å‚ç›´å€åŸŸã€‚' },
            'middle-l': { color: 'bg-yellow-200 border-yellow-400', label: 'å·¦æ‰‹ä¸­æŒ‡', desc: 'è² è²¬ "3, E, D, C" å‚ç›´å€åŸŸã€‚' },
            'index-l': { color: 'bg-green-200 border-green-400', label: 'å·¦æ‰‹é£ŸæŒ‡', desc: 'è² è²¬æœ€å¯¬çš„å€åŸŸ (4, 5, R, T, F, G, V, B)ï¼Œæ˜¯æœ€éˆæ´»çš„æ‰‹æŒ‡ã€‚' },
            'index-r': { color: 'bg-cyan-200 border-cyan-400', label: 'å³æ‰‹é£ŸæŒ‡', desc: 'è² è²¬ (6, 7, Y, U, H, J, N, M)ï¼Œæ³¨æ„ Jéµ ä¸Šæœ‰å®šä½é»ã€‚' },
            'middle-r': { color: 'bg-blue-200 border-blue-400', label: 'å³æ‰‹ä¸­æŒ‡', desc: 'è² è²¬ "8, I, K, ," å‚ç›´å€åŸŸã€‚' },
            'ring-r': { color: 'bg-indigo-200 border-indigo-400', label: 'å³æ‰‹ç„¡åæŒ‡', desc: 'è² è²¬ "9, O, L, ." å‚ç›´å€åŸŸã€‚' },
            'pinky-r': { color: 'bg-purple-200 border-purple-400', label: 'å³æ‰‹å°æŒ‡', desc: 'è² è²¬å³å´å¤–åœæ‰€æœ‰æŒ‰éµ (0, P, Enter, Shiftç­‰)ã€‚' },
            'thumb': { color: 'bg-slate-300 border-slate-500', label: 'å¤§æ‹‡æŒ‡', desc: 'é›™æ‰‹å¤§æ‹‡æŒ‡å°ˆé–€è² è²¬ç©ºç™½éµ (Space)ã€‚' },
            'system': { color: 'bg-gray-200 border-gray-400', label: 'ç³»çµ±åŠŸèƒ½éµ', desc: 'è¼ƒå°‘ç”¨åˆ°çš„åŠŸèƒ½éµã€‚' }
        };

        const FUNCTION_DESC = {
            'Esc': 'å–æ¶ˆ/é€€å‡ºï¼šç”¨ä¾†é›¢é–‹å…¨è¢å¹•æˆ–å–æ¶ˆç•¶å‰å‹•ä½œã€‚',
            'Tab': 'ç¸®æ’/è·³æ ¼ï¼šåœ¨æ–‡æ›¸è™•ç†ä¸­ç”¨ä¾†å°é½Šæ–‡å­—ï¼Œæˆ–åœ¨è¡¨å–®ä¸­è·³åˆ°ä¸‹ä¸€æ ¼ã€‚',
            'Caps': 'å¤§å¯«é–å®šï¼šæŒ‰ä¸‹å¾Œï¼Œè¼¸å…¥çš„è‹±æ–‡å­—æ¯å…¨éƒ½æœƒè®Šæˆå¤§å¯«ã€‚',
            'Shift': 'ä¸Šæª”éµï¼šæŒ‰ä½ä¸æ”¾å†æŒ‰å­—æ¯æœƒè®Šå¤§å¯«ï¼›æŒ‰ä½å†æŒ‰æ•¸å­—éµæœƒæ‰“å‡ºä¸Šæ–¹çš„ç¬¦è™Ÿ (å¦‚ ! @ #)ã€‚',
            'Ctrl': 'æ§åˆ¶éµï¼šé€šå¸¸é…åˆå…¶ä»–éµä½¿ç”¨ï¼Œå¦‚ Ctrl+C (è¤‡è£½)ã€Ctrl+V (è²¼ä¸Š)ã€‚',
            'Alt': 'æ›æ“‹éµï¼šé…åˆå…¶ä»–éµä½¿ç”¨ï¼Œå¦‚ Alt+Tab (åˆ‡æ›è¦–çª—)ã€‚',
            'Space': 'ç©ºç™½éµï¼šè¼¸å…¥ç©ºç™½ï¼Œæˆ–åœ¨éŠæˆ²ä¸­å¸¸ç”¨æ–¼è·³èºã€‚',
            'Backspace': 'é€€æ ¼éµï¼šåˆªé™¤æ¸¸æ¨™ã€Œå·¦é‚Šã€çš„å­—ã€‚',
            'Enter': 'ç¢ºèª/æ›è¡Œï¼šåŸ·è¡ŒæŒ‡ä»¤æˆ–åœ¨æ‰“å­—æ™‚æ›åˆ°ä¸‹ä¸€è¡Œã€‚',
            'F1-F12': 'åŠŸèƒ½éµï¼šä¾æ“šè»Ÿé«”ä¸åŒæœ‰ä¸åŒåŠŸèƒ½ï¼ŒF1é€šå¸¸æ˜¯ã€Œèªªæ˜ã€ã€‚',
            'Win': 'é–‹å§‹éµï¼šé–‹å•Ÿé›»è…¦çš„é–‹å§‹é¸å–®ã€‚'
        };

        const TUTORIAL_SECTIONS = {
            'anchors': {
                label: 'åŸºæº–éµ (å®šä½é»)',
                icon: <Scan className="w-4 h-4" />,
                keys: ['F', 'J'],
                desc: 'é€™æ˜¯éµç›¤ä¸Šæœ€é‡è¦çš„å…©å€‹éµï¼F å’Œ J éµä¸Šé€šå¸¸æœ‰å°å°çš„å‡¸èµ·ï¼Œè®“ä½ çš„é›™æ‰‹é£ŸæŒ‡åœ¨ä¸çœ‹éµç›¤çš„æƒ…æ³ä¸‹ï¼Œä¹Ÿèƒ½æ‘¸åˆ°æ­£ç¢ºçš„ä½ç½®ã€‚é€™å°±æ˜¯æ‰€è¬‚çš„ã€Œç›²æ‰“ã€åŸºç¤ã€‚',
                highlightClass: 'ring-4 ring-yellow-400 z-10 scale-105 bg-yellow-100 border-yellow-400'
            },
            'zhuyin': {
                label: 'æ³¨éŸ³ç¬¦è™Ÿå€',
                icon: <Type className="w-4 h-4" />,
                desc: 'é€™æ˜¯ä¸»è¦çš„æ‰“å­—å€åŸŸã€‚å·¦æ‰‹è² è²¬ã„…ã„†ã„‡ç­‰è²æ¯ï¼Œå³æ‰‹è² è²¬éŸ»æ¯ã€‚ç†Ÿç·´é€™å€çš„ä½ç½®æ˜¯æ‰“å­—é€Ÿåº¦çš„é—œéµã€‚',
                highlightClass: 'bg-green-100 border-green-400'
            },
            'tones': {
                label: 'è²èª¿ç¬¦è™Ÿå€',
                icon: <Volume2 className="w-4 h-4" />,
                keys: ['3', '4', '6', '7', 'Space'],
                desc: 'æ³¨éŸ³æœ‰äº”ç¨®è²èª¿ï¼šä¸‰è²(Ë‡)åœ¨æ•¸å­—3ã€å››è²(Ë‹)åœ¨æ•¸å­—4ã€äºŒè²(ËŠ)åœ¨æ•¸å­—6ã€è¼•è²(Ë™)åœ¨æ•¸å­—7ã€‚è€Œæœ€å¸¸ç”¨çš„ä¸€è²(é™°å¹³)å‰‡æ˜¯ç›´æ¥æŒ‰ã€Œç©ºç™½éµã€ã€‚',
                highlightClass: 'bg-blue-100 border-blue-400'
            }
        };

        const KEYBOARD_ROWS = [
            // åŠŸèƒ½éµåˆ—
            [
                { w: 1, label: 'Esc', zone: 'pinky-l', type: 'func' },
                { w: 1, gap: true },
                { w: 1, label: 'F1', zone: 'pinky-l', type: 'func' }, { w: 1, label: 'F2', zone: 'pinky-l', type: 'func' }, { w: 1, label: 'F3', zone: 'ring-l', type: 'func' }, { w: 1, label: 'F4', zone: 'middle-l', type: 'func' },
                { w: 0.5, gap: true },
                { w: 1, label: 'F5', zone: 'index-l', type: 'func' }, { w: 1, label: 'F6', zone: 'index-l', type: 'func' }, { w: 1, label: 'F7', zone: 'index-r', type: 'func' }, { w: 1, label: 'F8', zone: 'index-r', type: 'func' },
                { w: 0.5, gap: true },
                { w: 1, label: 'F9', zone: 'middle-r', type: 'func' }, { w: 1, label: 'F10', zone: 'ring-r', type: 'func' }, { w: 1, label: 'F11', zone: 'pinky-r', type: 'func' }, { w: 1, label: 'F12', zone: 'pinky-r', type: 'func' }
            ],
            // æ•¸å­—åˆ—
            [
                { w: 1, label: '`', sub: '~', zh: '', zone: 'pinky-l' },
                { w: 1, label: '1', sub: '!', zh: 'ã„…', zone: 'pinky-l' },
                { w: 1, label: '2', sub: '@', zh: 'ã„‰', zone: 'ring-l' },
                { w: 1, label: '3', sub: '#', zh: 'Ë‡', zone: 'middle-l' },
                { w: 1, label: '4', sub: '$', zh: 'Ë‹', zone: 'index-l' },
                { w: 1, label: '5', sub: '%', zh: 'ã„“', zone: 'index-l' },
                { w: 1, label: '6', sub: '^', zh: 'ËŠ', zone: 'index-r' },
                { w: 1, label: '7', sub: '&', zh: 'Ë™', zone: 'index-r' },
                { w: 1, label: '8', sub: '*', zh: 'ã„š', zone: 'middle-r' },
                { w: 1, label: '9', sub: '(', zh: 'ã„', zone: 'ring-r' },
                { w: 1, label: '0', sub: ')', zh: 'ã„¢', zone: 'pinky-r' },
                { w: 1, label: '-', sub: '_', zh: 'ã„¦', zone: 'pinky-r' },
                { w: 1, label: '=', sub: '+', zh: '', zone: 'pinky-r' },
                { w: 2, label: 'Backspace', zone: 'pinky-r', type: 'func' }
            ],
            // QWERTY åˆ—
            [
                { w: 1.5, label: 'Tab', zone: 'pinky-l', type: 'func' },
                { w: 1, label: 'Q', zh: 'ã„†', zone: 'pinky-l' },
                { w: 1, label: 'W', zh: 'ã„Š', zone: 'ring-l' },
                { w: 1, label: 'E', zh: 'ã„', zone: 'middle-l' },
                { w: 1, label: 'R', zh: 'ã„', zone: 'index-l' },
                { w: 1, label: 'T', zh: 'ã„”', zone: 'index-l' },
                { w: 1, label: 'Y', zh: 'ã„—', zone: 'index-r' },
                { w: 1, label: 'U', zh: 'ã„§', zone: 'index-r' },
                { w: 1, label: 'I', zh: 'ã„›', zone: 'middle-r' },
                { w: 1, label: 'O', zh: 'ã„Ÿ', zone: 'ring-r' },
                { w: 1, label: 'P', zh: 'ã„£', zone: 'pinky-r' },
                { w: 1, label: '[', zh: '', zone: 'pinky-r' },
                { w: 1, label: ']', zh: '', zone: 'pinky-r' },
                { w: 1.5, label: '\\', zh: '', zone: 'pinky-r' }
            ],
            // ASDF åˆ—
            [
                { w: 1.8, label: 'Caps', zone: 'pinky-l', type: 'func' },
                { w: 1, label: 'A', zh: 'ã„‡', zone: 'pinky-l' },
                { w: 1, label: 'S', zh: 'ã„‹', zone: 'ring-l' },
                { w: 1, label: 'D', zh: 'ã„', zone: 'middle-l' },
                { w: 1, label: 'F', zh: 'ã„‘', zone: 'index-l', bump: true }, // å®šä½é»
                { w: 1, label: 'G', zh: 'ã„•', zone: 'index-l' },
                { w: 1, label: 'H', zh: 'ã„˜', zone: 'index-r' },
                { w: 1, label: 'J', zh: 'ã„¨', zone: 'index-r', bump: true }, // å®šä½é»
                { w: 1, label: 'K', zh: 'ã„œ', zone: 'middle-r' },
                { w: 1, label: 'L', zh: 'ã„ ', zone: 'ring-r' },
                { w: 1, label: ';', zh: 'ã„¤', zone: 'pinky-r' },
                { w: 1, label: '\'', zh: 'ã„¦', zone: 'pinky-r' },
                { w: 2.2, label: 'Enter', zone: 'pinky-r', type: 'func' }
            ],
            // ZXCV åˆ—
            [
                { w: 2.3, label: 'Shift', zone: 'pinky-l', type: 'func' },
                { w: 1, label: 'Z', zh: 'ã„ˆ', zone: 'pinky-l' },
                { w: 1, label: 'X', zh: 'ã„Œ', zone: 'ring-l' },
                { w: 1, label: 'C', zh: 'ã„', zone: 'middle-l' },
                { w: 1, label: 'V', zh: 'ã„’', zone: 'index-l' },
                { w: 1, label: 'B', zh: 'ã„–', zone: 'index-l' },
                { w: 1, label: 'N', zh: 'ã„™', zone: 'index-r' },
                { w: 1, label: 'M', zh: 'ã„©', zone: 'index-r' },
                { w: 1, label: ',', zh: 'ã„', zone: 'middle-r' },
                { w: 1, label: '.', zh: 'ã„¡', zone: 'ring-r' },
                { w: 1, label: '/', zh: 'ã„¥', zone: 'pinky-r' },
                { w: 2.7, label: 'Shift', zone: 'pinky-r', type: 'func' }
            ],
            // åº•éƒ¨åˆ—
            [
                { w: 1.5, label: 'Ctrl', zone: 'pinky-l', type: 'func' },
                { w: 1.2, label: 'Win', zone: 'pinky-l', type: 'func' },
                { w: 1.2, label: 'Alt', zone: 'pinky-l', type: 'func' },
                { w: 7.6, label: 'Space', zone: 'thumb', type: 'func' },
                { w: 1.2, label: 'Alt', zone: 'pinky-r', type: 'func' },
                { w: 1.2, label: 'Win', zone: 'pinky-r', type: 'func' },
                { w: 1.2, label: 'Ctrl', zone: 'pinky-r', type: 'func' }
            ]
        ];

        // --- ä¸»å…ƒä»¶ ---
        function KeyboardExplainer() {
            const [viewMode, setViewMode] = useState('zones');
            const [tutorialSection, setTutorialSection] = useState('anchors');
            const [hoveredKey, setHoveredKey] = useState(null);

            const getInfoContent = () => {
                if (viewMode === 'tutorial') {
                    const section = TUTORIAL_SECTIONS[tutorialSection];
                    return {
                        title: section.label,
                        content: section.desc,
                        colorClass: 'bg-indigo-50 border-indigo-200'
                    };
                }
                if (!hoveredKey) {
                    return {
                        title: viewMode === 'zones' ? 'æŒ‡æ³•å€åŸŸèªªæ˜' : 'æŒ‰éµåŠŸèƒ½èªªæ˜',
                        content: 'è«‹å°‡æ»‘é¼ æ¸¸æ¨™ç§»å‹•åˆ°éµç›¤æŒ‰éµä¸Šï¼ŒæŸ¥çœ‹è©³ç´°ä»‹ç´¹ã€‚',
                        colorClass: 'bg-slate-100 border-slate-300'
                    };
                }
                if (viewMode === 'zones') {
                    const zoneData = FINGER_ZONES[hoveredKey.zone];
                    return {
                        title: zoneData.label,
                        content: zoneData.desc,
                        colorClass: zoneData.color
                    };
                } else {
                    let desc = 'ä¸€èˆ¬æ–‡å­—è¼¸å…¥éµ';
                    let title = hoveredKey.label;

                    if (hoveredKey.type === 'func' || FUNCTION_DESC[hoveredKey.label]) {
                        const descText = FUNCTION_DESC[hoveredKey.label] || (hoveredKey.label.startsWith('F') ? FUNCTION_DESC['F1-F12'] : 'ç‰¹æ®ŠåŠŸèƒ½éµ');
                        title = hoveredKey.label;
                        desc = descText;
                    } else {
                        title = `${hoveredKey.zh || hoveredKey.label}`;
                        desc = `è¼¸å…¥æ³¨éŸ³ "${hoveredKey.zh || ''}" (è‹±æ–‡éµ: ${hoveredKey.label})`;
                    }

                    return {
                        title: title,
                        content: desc,
                        colorClass: 'bg-blue-100 border-blue-300'
                    };
                }
            };

            const infoData = getInfoContent();

            return (
                <div className="min-h-screen bg-slate-50 p-6 flex flex-col items-center font-sans">
                    <div className="text-center mb-8 max-w-2xl">
                        <h1 className="text-3xl font-bold text-slate-800 mb-3 flex items-center justify-center gap-3">
                            <KeyboardIcon className="w-8 h-8" />
                            éµç›¤æ§‹é€ èˆ‡æŒ‡æ³•å°è¦½
                        </h1>
                        <p className="text-slate-600">
                            é€éäº’å‹•å¼å°è¦½ï¼Œå­¸ç¿’æ­£ç¢ºçš„ã€Œæ‰‹æŒ‡æ“ºæ”¾ä½ç½®ã€ã€ã€ŒåŠŸèƒ½éµç”¨é€”ã€ä»¥åŠã€Œæ³¨éŸ³è²èª¿åˆ†å€ã€ã€‚
                        </p>
                    </div>

                    <div className="flex bg-white p-1 rounded-xl shadow-sm border border-slate-200 mb-6">
                        <button onClick={() => setViewMode('zones')} className={`px-6 py-2 rounded-lg flex items-center gap-2 transition-all ${viewMode === 'zones' ? 'bg-indigo-600 text-white shadow-md' : 'text-slate-600 hover:bg-slate-50'}`}>
                            <Hand className="w-4 h-4" /> æŒ‡æ³•åˆ†å€
                        </button>
                        <button onClick={() => setViewMode('functions')} className={`px-6 py-2 rounded-lg flex items-center gap-2 transition-all ${viewMode === 'functions' ? 'bg-blue-600 text-white shadow-md' : 'text-slate-600 hover:bg-slate-50'}`}>
                            <MousePointer2 className="w-4 h-4" /> æŒ‰éµåŠŸèƒ½
                        </button>
                        <button onClick={() => setViewMode('tutorial')} className={`px-6 py-2 rounded-lg flex items-center gap-2 transition-all ${viewMode === 'tutorial' ? 'bg-emerald-600 text-white shadow-md' : 'text-slate-600 hover:bg-slate-50'}`}>
                            <Layout className="w-4 h-4" /> åˆ†å€æ•™å­¸
                        </button>
                    </div>

                    {/* æŒ‡æ³•åˆ†å€èªªæ˜åœ–ä¾‹ (æ–°å¢) */}
                    {viewMode === 'zones' && (
                        <div className="flex flex-wrap justify-center gap-3 mb-6 max-w-4xl animate-fade-in-down">
                            {/* å·¦æ‰‹ */}
                            <div className="flex items-center gap-2 p-2 bg-white rounded-lg border border-slate-200 shadow-sm">
                                <span className="text-xs font-bold text-slate-400 mr-1">å·¦æ‰‹</span>
                                {[ 'pinky-l', 'ring-l', 'middle-l', 'index-l'].map(zone => (
                                    <div key={zone} className="flex items-center gap-1">
                                        <div className={`w-3 h-3 rounded-full ${FINGER_ZONES[zone].color.split(' ')[0]}`}></div>
                                        <span className="text-xs text-slate-600">{FINGER_ZONES[zone].label.replace('å·¦æ‰‹', '').replace('æŒ‡', '')}</span>
                                    </div>
                                ))}
                            </div>

                             {/* æ‹‡æŒ‡ */}
                             <div className="flex items-center gap-2 p-2 bg-white rounded-lg border border-slate-200 shadow-sm">
                                <div className="flex items-center gap-1">
                                    <div className={`w-3 h-3 rounded-full ${FINGER_ZONES['thumb'].color.split(' ')[0]}`}></div>
                                    <span className="text-xs text-slate-600">æ‹‡æŒ‡</span>
                                </div>
                            </div>

                            {/* å³æ‰‹ */}
                            <div className="flex items-center gap-2 p-2 bg-white rounded-lg border border-slate-200 shadow-sm">
                                <span className="text-xs font-bold text-slate-400 mr-1">å³æ‰‹</span>
                                {[ 'index-r', 'middle-r', 'ring-r', 'pinky-r'].map(zone => (
                                    <div key={zone} className="flex items-center gap-1">
                                        <div className={`w-3 h-3 rounded-full ${FINGER_ZONES[zone].color.split(' ')[0]}`}></div>
                                        <span className="text-xs text-slate-600">{FINGER_ZONES[zone].label.replace('å³æ‰‹', '').replace('æŒ‡', '')}</span>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    {viewMode === 'tutorial' && (
                        <div className="flex gap-2 mb-6 animate-fade-in-down">
                            {Object.entries(TUTORIAL_SECTIONS).map(([key, section]) => (
                                <button
                                    key={key}
                                    onClick={() => setTutorialSection(key)}
                                    className={`px-4 py-2 rounded-full text-sm font-bold flex items-center gap-2 border-2 transition-all ${tutorialSection === key ? 'border-slate-800 bg-slate-800 text-white scale-105' : 'border-slate-200 bg-white text-slate-500 hover:border-slate-400'}`}
                                >
                                    {section.icon}
                                    {section.label}
                                </button>
                            ))}
                        </div>
                    )}

                    <div className="bg-slate-800 p-6 rounded-3xl shadow-2xl border-b-[8px] border-slate-900 overflow-x-auto max-w-full">
                        <div className="flex flex-col gap-2 min-w-[900px]">
                            {KEYBOARD_ROWS.map((row, rIndex) => (
                                <div key={rIndex} className="flex gap-2 justify-center">
                                    {row.map((key, kIndex) => {
                                        if (key.gap) return <div key={`gap-${kIndex}`} style={{ width: `${key.w * 60}px` }}></div>;

                                        let keyColorClass = 'bg-slate-700 text-slate-300 border-slate-600';
                                        let opacityClass = 'opacity-100';
                                        let isHighlightedTutorial = false;

                                        if (viewMode === 'zones') {
                                            keyColorClass = FINGER_ZONES[key.zone].color.replace('bg-', 'bg-opacity-90 bg-').replace('border-', 'border-b-4 border-');
                                        } else if (viewMode === 'functions') {
                                            if (key.type === 'func') {
                                                keyColorClass = 'bg-slate-600 text-white border-b-4 border-slate-800 font-bold';
                                            } else {
                                                keyColorClass = 'bg-slate-100 text-slate-800 border-b-4 border-slate-300';
                                            }
                                        } else if (viewMode === 'tutorial') {
                                            opacityClass = 'opacity-20 grayscale';
                                            keyColorClass = 'bg-slate-200 text-slate-800 border-b-4 border-slate-300';

                                            if (tutorialSection === 'anchors') {
                                                if (key.label === 'F' || key.label === 'J') {
                                                    opacityClass = 'opacity-100';
                                                    isHighlightedTutorial = true;
                                                    keyColorClass = TUTORIAL_SECTIONS['anchors'].highlightClass;
                                                }
                                            } else if (tutorialSection === 'zhuyin') {
                                                if (key.zh) {
                                                    opacityClass = 'opacity-100';
                                                    keyColorClass = TUTORIAL_SECTIONS['zhuyin'].highlightClass;
                                                }
                                            } else if (tutorialSection === 'tones') {
                                                if (['3', '4', '6', '7'].includes(key.label) || key.label === 'Space') {
                                                    opacityClass = 'opacity-100';
                                                    isHighlightedTutorial = true;
                                                    keyColorClass = TUTORIAL_SECTIONS['tones'].highlightClass;
                                                }
                                            }
                                        }

                                        const isHovered = hoveredKey === key;
                                        if (isHovered && opacityClass !== 'opacity-20 grayscale') {
                                            keyColorClass += ' brightness-110 transform -translate-y-1';
                                            if (viewMode === 'functions') keyColorClass = 'bg-blue-400 text-white border-blue-600 border-b-4';
                                        }

                                        return (
                                            <div
                                                key={`${rIndex}-${kIndex}`}
                                                onMouseEnter={() => setHoveredKey(key)}
                                                onMouseLeave={() => setHoveredKey(null)}
                                                style={{ width: `${key.w * 60}px`, height: '60px' }}
                                                className={`${keyColorClass} ${opacityClass} relative rounded-lg flex flex-col items-center justify-center cursor-pointer transition-all duration-300 select-none shadow-sm`}
                                            >
                                                {key.zh ? (
                                                    <>
                                                        <span className="absolute left-1.5 top-1 text-[10px] font-bold opacity-50">{key.label}</span>
                                                        {key.sub && <span className="absolute right-1.5 top-1 text-[10px] font-bold opacity-50">{key.sub}</span>}
                                                        <span className="text-2xl font-bold mb-1 z-10">{key.zh}</span>
                                                    </>
                                                ) : (
                                                    <span className={`text-sm font-bold`}>{key.label === 'Win' ? 'âŠ' : key.label}</span>
                                                )}

                                                {key.bump && (
                                                    <>
                                                        <div className={`absolute bottom-1 w-4 h-1 rounded-full ${isHighlightedTutorial && tutorialSection === 'anchors' ? 'bg-slate-800 animate-pulse' : 'bg-current opacity-30'}`}></div>
                                                        {isHighlightedTutorial && tutorialSection === 'anchors' && (
                                                            <span className="absolute -bottom-8 text-xs text-yellow-400 font-bold animate-bounce whitespace-nowrap">ğŸ‘† æ‘¸é€™è£¡</span>
                                                        )}
                                                    </>
                                                )}

                                                {tutorialSection === 'tones' && isHighlightedTutorial && (
                                                    <span className="absolute -top-3 bg-blue-600 text-white text-[10px] px-1 rounded shadow-sm scale-90">
                                                        {key.label === '3' ? 'ä¸‰è²' : key.label === '4' ? 'å››è²' : key.label === '6' ? 'äºŒè²' : key.label === '7' ? 'è¼•è²' : key.label === 'Space' ? 'ä¸€è²' : ''}
                                                    </span>
                                                )}
                                            </div>
                                        );
                                    })}
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className={`mt-8 w-full max-w-3xl p-6 rounded-2xl border-l-8 shadow-lg transition-colors duration-300 flex gap-4 items-start ${infoData.colorClass}`}>
                        <div className="p-3 bg-white bg-opacity-40 rounded-full shrink-0">
                            <Info className="w-6 h-6 text-slate-700" />
                        </div>
                        <div>
                            <h2 className="text-xl font-bold text-slate-800 mb-1">{infoData.title}</h2>
                            <p className="text-slate-700 text-lg leading-relaxed">{infoData.content}</p>
                            {viewMode === 'zones' && hoveredKey && (
                                <p className="mt-2 text-sm text-slate-500 font-medium bg-white bg-opacity-50 inline-block px-2 py-1 rounded">
                                    ğŸ’¡ è©¦è‘—åªç”¨é€™éš»æ‰‹æŒ‡å»æŒ‰é€™å€‹é¡è‰²çš„å€åŸŸ
                                </p>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        // æ¸²æŸ“åˆ° DOM
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<KeyboardExplainer />);
    </script>
</body>
</html>
